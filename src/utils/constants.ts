/**
 * Universal Profile Skill - Constants
 * Network configurations, contract addresses, and data keys
 */

// ==================== NETWORK CONFIGURATIONS ====================

export interface NetworkConfig {
  chainId: number;
  name: string;
  rpcUrl: string;
  explorer: string;
  relayerUrl: string | null;
  contracts: {
    LSP16_UNIVERSAL_FACTORY: string;
    LSP23_LINKED_CONTRACTS_FACTORY: string;
    UP_IMPLEMENTATION: string;
    KEY_MANAGER_IMPLEMENTATION: string;
    UP_POST_DEPLOYMENT_MODULE: string;
    UNIVERSALSWAPS_FACTORY: string | null;
    UNIVERSALSWAPS_ROUTER: string | null;
    WLYX: string | null;
    MARKETPLACE: string | null;
  };
}

export const NETWORKS: Record<string, NetworkConfig> = {
  'lukso-mainnet': {
    chainId: 42,
    name: 'LUKSO Mainnet',
    rpcUrl: 'https://42.rpc.thirdweb.com',
    explorer: 'https://explorer.lukso.network',
    relayerUrl: 'https://relayer.lukso.network',
    contracts: {
      LSP16_UNIVERSAL_FACTORY: '0x1600016e23e25D20CA8759338BfB8A8d11563C4e',
      LSP23_LINKED_CONTRACTS_FACTORY: '0x2300000A84D25dF63081feAa37ba6b62C4c89a30',
      UP_IMPLEMENTATION: '0x3024D38EA2F6e66C60D8B6E94FCAa2cf60A74487',
      KEY_MANAGER_IMPLEMENTATION: '0x2Fe3AeD98684E7351aD2D408A43cE09a738BF8a4',
      UP_POST_DEPLOYMENT_MODULE: '0x000000000066093407b6704B89793beFfD0D8F00',
      UNIVERSALSWAPS_FACTORY: null, // To be verified
      UNIVERSALSWAPS_ROUTER: null, // To be verified
      WLYX: null, // To be verified
      MARKETPLACE: null, // Universal Page - to be verified
    },
  },
  'lukso-testnet': {
    chainId: 4201,
    name: 'LUKSO Testnet',
    rpcUrl: 'https://rpc.testnet.lukso.network',
    explorer: 'https://explorer.testnet.lukso.network',
    relayerUrl: 'https://relayer.testnet.lukso.network',
    contracts: {
      LSP16_UNIVERSAL_FACTORY: '0x1600016e23e25D20CA8759338BfB8A8d11563C4e',
      LSP23_LINKED_CONTRACTS_FACTORY: '0x2300000A84D25dF63081feAa37ba6b62C4c89a30',
      UP_IMPLEMENTATION: '0x3024D38EA2F6e66C60D8B6E94FCAa2cf60A74487',
      KEY_MANAGER_IMPLEMENTATION: '0x2Fe3AeD98684E7351aD2D408A43cE09a738BF8a4',
      UP_POST_DEPLOYMENT_MODULE: '0x000000000066093407b6704B89793beFfD0D8F00',
      UNIVERSALSWAPS_FACTORY: null,
      UNIVERSALSWAPS_ROUTER: null,
      WLYX: null,
      MARKETPLACE: null,
    },
  },
};

export const DEFAULT_NETWORK = 'lukso-mainnet';

// ==================== ERC725Y DATA KEYS ====================

export const DATA_KEYS = {
  // Profile (LSP3)
  LSP3Profile: '0x5ef83ad9559033e6e941db7d7c495acdce616347d28e90c7ce47cbfcfcad3bc5',

  // Permissions (LSP6)
  'AddressPermissions[]': {
    length: '0xdf30dba06db6a30e65354d9a64c609861f089545ca58c6b4dbe31a5f338cb0e3',
    index: '0xdf30dba06db6a30e65354d9a64c609861f089545ca58c6b4dbe31a5f338cb0e3',
  },
  'AddressPermissions:Permissions': '0x4b80742de2bf82acb3630000', // + address (20 bytes)
  'AddressPermissions:AllowedCalls': '0x4b80742de2bf393a64c70000', // + address (20 bytes)
  'AddressPermissions:AllowedERC725YDataKeys': '0x4b80742de2bf866c29110000', // + address (20 bytes)

  // Received Assets (LSP5)
  'LSP5ReceivedAssets[]': {
    length: '0x6460ee3c0aac563ccbf76d6e1d07bada78e3a9514e6382b736ed3f478ab7b90b',
    index: '0x6460ee3c0aac563ccbf76d6e1d07bada78e3a9514e6382b736ed3f478ab7b90b',
  },

  // Token Metadata (LSP4)
  LSP4TokenName: '0xdeba1e292f8ba88238e10ab3c7f88bd4be4fac56cad5194b6ecceaf653468af1',
  LSP4TokenSymbol: '0x2f0a68ab07768e01943a599e73362a0e17a63a72e94dd2e384d2c1d4db932756',
  LSP4Metadata: '0x9afb95cacc9f95858ec44aa8c3b685511002e30ae54415823f406128b85b238e',
  LSP4Creators: '0x114bd03b3a46d48759680d81ebb2b414fda7d030a7105a851867accf1c2352e7',
  LSP4CreatorsMap: '0x6de85eaf5d982b4e5da00000', // + creator address
};

// ==================== LSP6 PERMISSIONS ====================

export const PERMISSIONS = {
  CHANGEOWNER: '0x0000000000000000000000000000000000000000000000000000000000000001',
  ADDCONTROLLER: '0x0000000000000000000000000000000000000000000000000000000000000002',
  EDITPERMISSIONS: '0x0000000000000000000000000000000000000000000000000000000000000004',
  ADDEXTENSIONS: '0x0000000000000000000000000000000000000000000000000000000000000008',
  CHANGEEXTENSIONS: '0x0000000000000000000000000000000000000000000000000000000000000010',
  ADDUNIVERSALRECEIVERDELEGATE: '0x0000000000000000000000000000000000000000000000000000000000000020',
  CHANGEUNIVERSALRECEIVERDELEGATE: '0x0000000000000000000000000000000000000000000000000000000000000040',
  REENTRANCY: '0x0000000000000000000000000000000000000000000000000000000000000080',
  SUPER_TRANSFERVALUE: '0x0000000000000000000000000000000000000000000000000000000000000100',
  TRANSFERVALUE: '0x0000000000000000000000000000000000000000000000000000000000000200',
  SUPER_CALL: '0x0000000000000000000000000000000000000000000000000000000000000400',
  CALL: '0x0000000000000000000000000000000000000000000000000000000000000800',
  SUPER_STATICCALL: '0x0000000000000000000000000000000000000000000000000000000000001000',
  STATICCALL: '0x0000000000000000000000000000000000000000000000000000000000002000',
  SUPER_DELEGATECALL: '0x0000000000000000000000000000000000000000000000000000000000004000',
  DELEGATECALL: '0x0000000000000000000000000000000000000000000000000000000000008000',
  DEPLOY: '0x0000000000000000000000000000000000000000000000000000000000010000',
  SUPER_SETDATA: '0x0000000000000000000000000000000000000000000000000000000000020000',
  SETDATA: '0x0000000000000000000000000000000000000000000000000000000000040000',
  ENCRYPT: '0x0000000000000000000000000000000000000000000000000000000000080000',
  DECRYPT: '0x0000000000000000000000000000000000000000000000000000000000100000',
  SIGN: '0x0000000000000000000000000000000000000000000000000000000000200000',
  EXECUTE_RELAY_CALL: '0x0000000000000000000000000000000000000000000000000000000000400000',
  ALL_PERMISSIONS: '0x00000000000000000000000000000000000000000000000000000000007f3f7f',
} as const;

export type PermissionName = keyof typeof PERMISSIONS;

// ==================== INTERFACE IDS ====================

export const INTERFACE_IDS = {
  LSP0ERC725Account: '0x24871b3d',
  LSP6KeyManager: '0x23f34c62',
  LSP7DigitalAsset: '0xc52d6008',
  LSP8IdentifiableDigitalAsset: '0x3a271706',
  LSP9Vault: '0x28af17e6',
  ERC725X: '0x7545acac',
  ERC725Y: '0x629aa694',
  ERC165: '0x01ffc9a7',
  ERC1271: '0x1626ba7e',
};

// ==================== OPERATION TYPES ====================

export const OPERATION_TYPES = {
  CALL: 0,
  CREATE: 1,
  CREATE2: 2,
  STATICCALL: 3,
  DELEGATECALL: 4,
};

// ==================== LSP25 CONSTANTS ====================

export const LSP25_VERSION = 25;

// ==================== DEFAULT VALUES ====================

export const DEFAULTS = {
  slippage: 0.5, // 0.5%
  transactionDeadline: 1200, // 20 minutes
  confirmations: 1,
  gasLimitBuffer: 1.2, // 20% buffer
};
